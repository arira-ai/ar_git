
# Cryptography – Foundation of Git & GitHub Security

### What is Cryptography?

Cryptography is the practice of **securing data** using mathematical techniques so that:

* Data cannot be altered
* Identity can be verified
* Communication is secure

---

### Types of Cryptography
```mermaid

graph TD
    subgraph Crypto_Types [Main Cryptography Types]
        direction TB
        
        S[Symmetric Cryptography]
        A[Asymmetric Cryptography]
        H[Hashing]
    end

    subgraph Symmetric_Logic [Shared Secret]
        S --- S1[Same Key for Encrypt & Decrypt]
        S1 --- S2["Example: AES (Used in SSL Data Transfer)"]
    end

    subgraph Asymmetric_Logic [Key Pairs]
        A --- A1[Public Key + Private Key]
        A1 --- A2["Example: RSA/SSH (Used for GitHub Login)"]
    end

    subgraph Hash_Logic [Fingerprint]
        H --- H1[One-way Transformation]
        H1 --- H2["Example: SHA-1 (Used for Git Commits)"]
    end

    %% Styling
    style S font-weight:bold
    style A font-weight:bold
    style H font-weight:bold
```

#### 1. Hashing

* One-way function
* Same input always gives same output
* Cannot be reversed

Examples:

* SHA-1
* SHA-256

##### How Git uses hashing

* Every commit is identified by a hash
* Any change creates a new hash
* Ensures data integrity

##### Small hands-on

```bash
echo "hello" | sha1sum
```

Change input → hash changes.

---

#### 2. Symmetric Encryption

* Same key used for encryption and decryption
* Fast but key sharing is risky

Example:

* AES

Not directly used in Git authentication.

---

#### 3. Asymmetric Encryption

* Uses a **pair of keys**

  * Public key
  * Private key

Example:

* RSA
* Ed25519

Used in **SSH authentication**.

---

### Cryptography in GitHub

```mermaid

flowchart LR
    subgraph Data_Input [Commit Inputs]
        A["Author, Date, <br/> Message, & Files"]
    end

    subgraph Process [Hashing Algorithm]
        B{SHA-1 Hash}
    end

    subgraph Output [Result]
        C[40-Char Hash ID <br/> e.g., f82a7b...]
    end

    subgraph Validation [Security]
        D((Integrity))
    end

    %% Flow
    A --> B
    B --> C
    C --> D

    %% Note
    Note1["If even ONE character <br/> in the code changes, <br/> the Hash ID changes <br/> completely."]
    Note1 --- B
    
    style Note1 stroke-dasharray: 5 5
```

---

## 4. SSH and HTTPS – Communication Methods

### HTTPS Authentication

* Uses username + password OR token
* Encrypted using Transport Layer Security (TLS)
* Simple to set up

Example URL:

```
https://github.com/user/repo.git
```

Authentication methods:

* Personal Access Token (PAT)
* OAuth

Limitations:

* Requires token rotation
* Manual credential management

---

### SSH Authentication

* Uses public/private key cryptography
* Password-less authentication
* More secure and automation-friendly

Example URL:

```
git@github.com:user/repo.git
```

Authentication methods:

* SSH key pair

---

### SSH vs HTTPS Comparison

| Feature       | HTTPS   | SSH       |
| ------------- | ------- | --------- |
| Password-less | No      | Yes       |
| Automation    | Limited | Excellent |
| Security      | Good    | Very High |
| CI/CD usage   | Medium  | Preferred |

---

## 5. Authentication Process for Cloning a Repo

### HTTPS Authentication Flow


```mermaid

sequenceDiagram
    participant Dev as Developer
    participant Git as Git Credential Manager
    participant GH as GitHub API

    Dev->>Git: Enters Username + PAT (Token)
    Git->>GH: Sends credentials via TLS/SSL
    Note over GH: Validates Token Scopes <br/> (e.g., repo, workflow)
    alt Token is Valid
        GH-->>Dev: HTTP 200 (Success)
    else Token Expired/Invalid
        GH-->>Dev: HTTP 401 (Unauthorized)
    end
```


---

### SSH Authentication Flow

```mermaid

sequenceDiagram
    participant PC as Developer's PC (Private Key)
    participant GH as GitHub (Public Key)

    Note over PC, GH: SSH Handshake (Asymmetric)
    PC->>GH: "I want to push code as 'john_dev'"
    GH->>PC: Sends a 'Random Challenge' (Encrypted with Public Key)
    Note right of PC: Only the Private Key <br/> can decrypt this!
    PC->>PC: Decrypts challenge with Private Key
    PC->>GH: Sends decrypted answer
    GH->>GH: Verification Successful
    GH-->>PC: Access Granted (Encrypted Tunnel Starts)
```

---

### SSH Hands-on (Minimal)

```bash
ssh-keygen -t ed25519
cat ~/.ssh/id_ed25519.pub
```

Add the public key to GitHub → SSH Keys.

Test:

```bash
ssh -T git@github.com
```

---

## 6. End-to-End Connected View

```mermaid

flowchart LR
    subgraph Dev_Workstation [Local Machine]
        A[Developer] --> B[Git Bash]
        B --> C[Git Local Repo]
        
        %% Internal security
        C -.-> D[Cryptographic Hashing <br/> 'Integrity']
    end

    subgraph Transport [Security Layer]
        E{SSH / HTTPS <br/> 'Authentication'}
    end

    subgraph Cloud [Remote Cloud]
        F[(GitHub Remote Repo)]
    end

    %% Connection
    C --- E
    E --- F

    %% Notes
    N1["Hashing ensures the code <br/> hasn't changed locally."]
    N2["SSH/HTTPS ensures the <br/> connection is authorized."]

    D --- N1
    E --- N2

    style N1 stroke-dasharray: 5 5
    style N2 stroke-dasharray: 5 5
```

---

## Key Takeaways (Beginner Mental Model)

* Git tracks **changes**
* GitHub hosts **repositories**
* Git Bash is the **interface**
* Cryptography ensures **integrity + identity**
* SSH is preferred for **secure automation**
* HTTPS is simpler but less flexible


